---
import BaseLayout from "../layouts/BaseLayout.astro";
import BentoGrid from "../components/BentoGrid.astro";
import BentoItem from "../components/BentoItem.astro";
import NavBar from "../components/NavBar.astro";
import { recentMusic, recentBooks, recentHobbies } from "../data/garden";

// Logic: Latest item from each category
const latestMusic = { ...recentMusic[0], category: "Music" };
const latestBook = { ...recentBooks[0], category: "Books" };
const latestHobby = { ...recentHobbies[0], category: "Hobbies" };

// Combine and shuffle
const gardenItems = [latestMusic, latestBook, latestHobby];
const randomGardenItems = gardenItems.sort(() => Math.random() - 0.5);
---

<BaseLayout title="Guillermo Barraza">
  <NavBar />

  <main class="mt-8 mb-20">
    <!-- Transparent Bio Section -->
    <div class="flex justify-center w-full" style="margin-bottom: 6rem;">
      <section class="max-w-3xl text-center">
        <h1
          class="text-3xl md:text-4xl font-serif text-neutral-800 tracking-tight leading-[1.2] mb-8"
        >
          Keeping the servers running and the latency low at <span
            class="font-bold text-[#76b900]">NVIDIA GeForce NOW</span
          >.
        </h1>
        <p class="text-xl text-neutral-600 leading-relaxed mb-6">
          I specialize in hybrid infrastructure and business continuity,
          bridging the gap between operations and code to build smarter
          automations. I approach technical challenges with the same mindset I
          bring to the rugby pitch: strategic, resilient, and team-focused.
        </p>
        <p class="text-xl text-neutral-600 leading-relaxed">
          Off-screen, I am powered by a steady stream of mate, coffee, and an
          ever-growing library of unread books. Music is my focus method.
        </p>
      </section>
    </div>

    <!-- Grid of Content -->
    <div class="w-full flex justify-center">
      <BentoGrid class="w-full max-w-3xl">
        {
          randomGardenItems.map((item) =>
            item.category === "Music" ? (
              <BentoItem class="col-span-1 md:col-span-1 aspect-square p-0 overflow-hidden group relative">
                <img
                  src={
                    item.image.startsWith("/")
                      ? import.meta.env.BASE_URL + item.image
                      : item.image
                  }
                  alt={item.title}
                  class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
                />
                <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300" />
                <div class="absolute inset-0 flex flex-col justify-end p-6 opacity-0 translate-y-4 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0">
                  <p class="text-xs text-white/80 mb-2 font-medium uppercase tracking-wider">
                    {item.category}
                  </p>
                  <h3 class="text-lg font-bold text-white leading-tight">
                    {item.title}
                  </h3>
                  <p class="text-sm text-white/90 mt-1">{item.subtitle}</p>
                </div>
              </BentoItem>
            ) : (
              <BentoItem class="col-span-1 md:col-span-1 aspect-square">
                <div class="h-full flex flex-col justify-between">
                  <div>
                    <p class="text-xs text-neutral-400 mb-2 font-medium uppercase tracking-wider">
                      {item.category}
                    </p>
                    <h3 class="text-lg font-semibold text-neutral-900 leading-tight">
                      {item.title}
                    </h3>
                    <p class="text-sm text-neutral-500 mt-1">{item.subtitle}</p>
                  </div>
                  <a
                    href={item.link}
                    class="text-sm text-neutral-900 font-medium hover:underline mt-4 inline-block"
                  >
                    View â†’
                  </a>
                </div>
              </BentoItem>
            )
          )
        }
      </BentoGrid>
    </div>
  </main>
</BaseLayout>
